# 项目启动说明

## 前置要求

1. **JDK 1.8** - 确保已安装并配置JAVA_HOME环境变量
2. **Maven 3.6+** - 确保已安装并配置到PATH环境变量
3. **PostgreSQL 14+** - 数据库服务需要运行
4. **Redis 7+** - Redis服务需要运行（可选，如果使用缓存功能）

## 启动步骤

### 1. 检查环境

```bash
# 检查Java版本
java -version

# 检查Maven版本
mvn -version
```

### 2. 配置数据库

修改 `src/main/resources/application.yml` 中的数据库连接信息：

```yaml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/datamodel?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai
    username: postgres
    password: postgres
```

### 3. 创建数据库

```sql
CREATE DATABASE datamodel;
```

### 4. 执行数据库初始化脚本

根据设计文档中的数据库设计，执行SQL脚本创建表结构。

### 5. 编译项目

```bash
cd backend
mvn clean compile
```

### 6. 打包项目

```bash
mvn clean package
```

### 7. 启动项目

**方式一：使用Maven启动（开发模式）**

```bash
mvn spring-boot:run
```

**方式二：使用JAR包启动**

```bash
java -jar target/data-model-platform-1.0.0-SNAPSHOT.jar
```

**方式三：指定配置文件启动**

```bash
java -jar target/data-model-platform-1.0.0-SNAPSHOT.jar --spring.profiles.active=dev
```

### 8. 验证启动

启动成功后，访问以下地址：

- **API文档（Knife4j）**: http://localhost:8080/api/doc.html
- **Swagger JSON**: http://localhost:8080/api/v3/api-docs
- **健康检查**: http://localhost:8080/api/actuator/health（如果配置了actuator）

## 常见问题

### Maven未找到

如果提示 `mvn 不是内部或外部命令`，需要：

1. 下载Maven: https://maven.apache.org/download.cgi
2. 解压并配置环境变量：
   - 添加 `MAVEN_HOME` = Maven安装目录
   - 在 `PATH` 中添加 `%MAVEN_HOME%\bin`

### 数据库连接失败

检查：
1. PostgreSQL服务是否启动
2. 数据库名称、用户名、密码是否正确
3. 数据库是否已创建

### 端口被占用

如果8080端口被占用，可以修改 `application.yml` 中的端口：

```yaml
server:
  port: 8081  # 修改为其他端口
```

## 开发模式

如果使用IDE（如IntelliJ IDEA或Eclipse）：

1. 导入Maven项目
2. 等待Maven依赖下载完成
3. 找到 `DataModelApplication.java` 主类
4. 右键运行 `main` 方法

## API测试

启动后可以使用以下工具测试API：

1. **Knife4j UI** - 访问 http://localhost:8080/api/doc.html 进行在线测试
2. **Postman** - 导入API文档进行测试
3. **curl** - 命令行测试

示例请求：

```bash
# 创建对象类型
curl -X POST http://localhost:8080/api/v1/object-types \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Customer",
    "displayName": "客户",
    "description": "客户实体"
  }'
```

